#! /bin/bash
########################################################################################
# deb-cryptlvm-nokvm configuration template
#
# This file gives the default parameter values
#
# WARNINGS:
# - each value should be carefully reviewed for your setup
# - no validation is done, it's up to you to define proper values for your target
#

########################################################################################
# disk to use disk setup (aka physical disk paritionning)
#
DCN_DISK="sda"

########################################################################################
# filesystem type used to format all partitions
#
DCN_FSTYPE="ext4"

########################################################################################
# name of the volume group to create on the target system 
#
DCN_VG_NAME="vg"

########################################################################################
# size of the root filesystem (example: 512M or 10G)
#
# INFORMATION: the volume will always be named 'rootfs'
#
DCN_ROOTFS_SIZE="512M"

########################################################################################
# size of the swap space 
#
# WARNING: so far, this script always creates (and uses) a swap device
# in any case, it can be removed post-install (fstab, swapoff, lvchange -an, lvdestroy)
#
DCN_SWAP_SIZE="256M"

########################################################################################
# filesystems to create
#
# syntax :
# - one line per filesystem : volumename,dimension_type,metric,mountpoint
# - 'dimension_type'can be 'size' for an absolute volume size
# - 'dimension_type'can be 'extents' for a relative volume size
# - in any case, 'metric' should be understandable to lvcreate (see man lvcreate)
#
# WARNING: the filesystems will be mounted in the given order, make sure it will work
#
DCN_PARTITIONS=(
	host_usr,size,1G,/usr
	host_var,size,1G,/var
	host_home,extents,10%ORIGIN,/home
	host_opt,size,256M,/opt
	host_tmp,size,256M,/tmp
	host_root,size,256M,/root
	host_data,extents,90%FREE,/data
)

########################################################################################
# the mirror to use for bootstraping the new system
#
DCN_BOOTSTRAP_MIRROR="http://cdn.debian.net/debian/"

########################################################################################
# the architecture of the new system
#
DCN_BOOTSTRAP_ARCH="amd64"

########################################################################################
# the debian release name for the new system
#
DCN_BOOTSTRAP_RELEASE="wheezy"

########################################################################################
# for ipost-bootstrap apt configuration, decide if you want to install recommends
# by default, or keep a stripped-down system
#
DCN_INSTALL_RECOMMENDS="False"

########################################################################################
# do yo want to use etckeeper ? it is a lightweight tool which uses git to track all
# the modifications in the /etc folder and greatly helps system maintenance
#
DCN_INSTALL_ETCKEEPER="True"

########################################################################################
# hostname for the new system
#
DCN_HOST_NAME="myhostname"

########################################################################################
# outside reachable network interface name, which will be configured by the kernel
# and will be used to reach the pre-boot ssh daemon to unlock filesystem
#
# WARNING: this CANNOT be a wireless/mobile adapter
#
DCN_HOST_IFACE="eth0"

########################################################################################
# ip address of the outside reachable network interface
#
DCN_HOST_IP="192.168.0.1"

########################################################################################
# netmask for the outside reachable network interface
#
DCN_HOST_MASK="255.255.255.0"

########################################################################################
# the network gateway to use to reach the outside network
#
DCN_HOST_GW="192.168.0.254"

########################################################################################
# the port for the pre-boot (unlocking) SSH daemon (dropbear) to listen on
#
# it is possible to have the dropbear daemon listen on another port than port 22
#
# with public facing servers, it helps reduce bot-related attempts
#
# the other advantage to have a different port here than from the regular SSH daemon is
# that the fignerprints are different, and using different ports will avoid the warnings
# on the clients when the ssh security checks are performed upon connecting
#
DCN_SSH_PORT_PREBOOT="12345"

########################################################################################
# the port for the post-boot (normal) SSH daemon (openssh-server) to listen on
#
# it is possible to have the openssh-server daemon listen on another port than port 22
#
# with public facing servers, it helps reduce bot-related attempts
#
# the other advantage to have a different port here than from the regular SSH daemon is
# that the fignerprints are different, and using different ports will avoid the warnings
# on the clients when the ssh security checks are performed upon connecting
#
DCN_SSH_PORT_BOOTED="54321"

########################################################################################
# the file containing the public keys allowed to connect to the system
#
# these keys are first used both for pre-boot dropbear and the post-boot openssh-server
#
# WARNING: if you later want to update the pre-boot ssh keys
# - log as root on the target fully-booted system
# - modify /etc/initramfs-tools/root/.ssh/authorized_keys
# - run 'update-initramfs -u'
# - the changes will be in effect upon reboot
#
# this is usually a single "id_rsa.pub" or a fully populated "authorized_keys"
#
DCN_SSH_AUTHKEYS_SRCFILE="authorized_keys"

########################################################################################
# source local override if it exists
#
if [[ -f local.conf ]]; then
	source local.conf
fi

